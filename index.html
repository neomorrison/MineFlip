<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>MineFinder</title>
	<link rel="stylesheet" href="stylesheet.css">
	
	<script src="https://kit.fontawesome.com/dee7930bfc.js" crossorigin="anonymous"></script>
</head>

<body>
	
	<script>
		
		var amt = 1;
		var bombs = [];
		var revealed = [];
	
	function play(){
		resetGame();
		bombs = loadGame(amt);
	}
	function changeMines(value){
		amt = value;
	}
		
		
	function loadGame(bombs){
		var numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25];
		
	// Disables playing while in progress
		var button = document.getElementById("start");
		button.disabled = true;
		button.innerHTML = '<i class="fa-solid fa-bomb fa-shake"></i>';
		
		

  // Shuffle the array
  		numbers.sort(() => Math.random() - 0.5);

  // Pick the first 'num' elements from the shuffled array
  		var pickedNumbers = numbers.slice(0, bombs);

  // Return the picked numbers
  		return pickedNumbers;
	}
		
		
	
	function flip(id){
		revealed.push(id);
		var win = new Audio('files/win.wav');
		var loss = new Audio('files/loss.wav');
		
		var button = document.getElementById(id);
		
		var icon = button.getElementsByTagName('i')[0];
		
		for(i = 0; i < bombs.length; i++){
			
			if(bombs[i] == id){
				icon.classList.add('fa-solid', 'fa-bomb', 'fa-shake', 'fa-6x');
				icon.style.setProperty('color', 'red');
				button.style.backgroundColor = '#071725';
				loss.play();
				
				for(i = 1; i <= 25; i++){
					var button = document.getElementById(i);
					button.disabled = true;
				}
				
				revealAll();
				break;
				
			}
				icon.classList.add('fa-solid', 'fa-gem', 'fa-beat', 'fa-5x');
				icon.style.setProperty('--fa-animation-duration', '2s');
				icon.style.setProperty('color', 'yellow');
				button.style.backgroundColor = '#071725';
				win.play();
				button.disabled = true;
		}
	}
		
		function revealAll() {
			var intArray = [];
			for(p = 0; p < revealed.length; p++){
				intArray.push(parseInt(revealed[p]));
			}
			for(i = 1; i <= 25; i++){
				if(!intArray.includes(i)){
					var button = document.getElementById(i);
      				var icon = button.getElementsByTagName('i')[0];
					
					if(bombs.includes(i)){
						icon.classList.add('fa-solid', 'fa-bomb', 'fa-shake', 'fa-2xl');
						icon.style.setProperty('color', 'darkred');
						button.style.backgroundColor = '#071725';
					}else{
						icon.classList.add('fa-solid', 'fa-gem', 'fa-beat', 'fa-xl');
						icon.style.setProperty('--fa-animation-duration', '2s');
						icon.style.setProperty('color', '#0A5C1C');
						button.style.backgroundColor = '#071725';
					}
				}
			}
			
			var button = document.getElementById("start");
			button.disabled = false;
			button.innerHTML = "PLAY";
		}
		
		function resetGame(){
			revealed = [];
			for (var i = 1; i <= 25; i++) {
				// Get the button element
				var button = document.getElementById(i.toString());
				button.style.backgroundColor = "#304453";
				button.disabled = false;

				// If the button exists, remove the icon
				if (button) {
				  // Get the first child element of the button
				  var firstChild = button.children[0];

				  // If the first child element is an icon, remove it
				  if (firstChild.tagName === 'I') {
					button.removeChild(firstChild);
				  }
				}
				const icon = document.createElement('i');
      			button.appendChild(icon);
			  }

		}
	</script>
	
	<table>
		
		
		<tr>
			<td><button id="1" class="button" onclick="flip('1')"><i></i></button></td>
			<td><button id="2" class="button" onclick="flip('2')"><i></i></button></td>
			<td><button id="3" class="button" onclick="flip('3')"><i></i></button></td>
			<td><button id="4" class="button" onclick="flip('4')"><i></i></button></td>
			<td><button id="5" class="button" onclick="flip('5')"><i></i></button></td>
		</tr>
		<tr>
			<td><button id="6" class="button" onclick="flip('6')"><i></i></button></td>
			<td><button id="7" class="button" onclick="flip('7')"><i></i></button></td>
			<td><button id="8" class="button" onclick="flip('8')"><i></i></button></td>
			<td><button id="9" class="button" onclick="flip('9')"><i></i></button></td>
			<td><button id="10" class="button" onclick="flip('10')"><i></i></button></td>
		</tr>
		<tr>
			<td><button id="11" class="button" onclick="flip('11')"><i></i></button></td>
			<td><button id="12" class="button" onclick="flip('12')"><i></i></button></td>
			<td><button id="13" class="button" onclick="flip('13')"><i></i></button></td>
			<td><button id="14" class="button" onclick="flip('14')"><i></i></button></td>
			<td><button id="15" class="button" onclick="flip('15')"><i></i></button></td>
		</tr>
		<tr>
			<td><button id="16" class="button" onclick="flip('16')"><i></i></button></td>
			<td><button id="17" class="button" onclick="flip('17')"><i></i></button></td>
			<td><button id="18" class="button" onclick="flip('18')"><i></i></button></td>
			<td><button id="19" class="button" onclick="flip('19')"><i></i></button></td>
			<td><button id="20" class="button" onclick="flip('20')"><i></i></button></td>
		</tr>
		<tr>
			<td><button id="21" class="button" onclick="flip('21')"><i></i></button></td>
			<td><button id="22" class="button" onclick="flip('22')"><i></i></button></td>
			<td><button id="23" class="button" onclick="flip('23')"><i></i></button></td>
			<td><button id="24" class="button" onclick="flip('24')"><i></i></button></td>
			<td><button id="25" class="button" onclick="flip('25')"><i></i></button></td>
		</tr>
	</table>
	
	
	<div class="under">
		<form>
  			<select id="dropdown" onchange="changeMines(this.value)">
    			<option value="1">1 Mine</option>
 			   	<option value="2">2 Mines</option>
    			<option value="3">3 Mines</option>
    			<option value="4">4 Mines</option>
				<option value="5">5 Mines</option>
 			   	<option value="6">6 Mines</option>
    			<option value="7">7 Mines</option>
    			<option value="8">8 Mines</option>
				<option value="9">9 Mines</option>
 			   	<option value="10">10 Mines</option>
    			<option value="11">11 Mines</option>
    			<option value="12">12 Mines</option>
				<option value="13">13 Mines</option>
    			<option value="14">14 Mines</option>
    			<option value="15">15 Mines</option>
				<option value="16">16 Mines</option>
    			<option value="17">17 Mines</option>
    			<option value="18">18 Mines</option>
				<option value="19">19 Mines</option>
    			<option value="20">20 Mines</option>
    			<option value="21">21 Mines</option>
				<option value="22">22 Mines</option>
    			<option value="23">23 Mines</option>
    			<option value="24">24 Mines</option>
  			</select>
		</form> 
		
		<button id="start" class="play" onclick="play()"><i></i>PLAY</button>
	</div>
	
</body>
	
	
	
</html>
